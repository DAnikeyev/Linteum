@using Linteum.Shared.DTO
@using Linteum.BlazorApp.Components.Notification
@inject NotificationService NotificationService

@code {
    [Parameter]
    public CanvasDto? Canvas { get; set; }

    [Parameter]
    public (int X, int Y)? ClickedPixel { get; set; }

    public long Gold { get; set; }

    private static readonly NLog.Logger _nlog = NLog.LogManager.GetCurrentClassLogger();

    private async Task NotifyAsync(CustomNotification note)
    {
        try
        {
            await NotificationService.Writer.WriteAsync(note);
        }
        catch (Exception ex)
        {
            _nlog.Warn(ex, "NotificationService.Writer.WriteAsync failed in PixelManager");
        }
    }
}

<div class="pixelmanager">
    <div class="pm-header">
        @if (Canvas == null)
        {
            <span class="pm-title">Canvas not loaded</span>
        }
        else
        {
            <span class="pm-title">@Canvas.Name : (@Canvas.Width x @Canvas.Height)</span>
        }
    </div>

    <div class="pm-content">
        <h6>Gold: @Gold ðŸª™</h6>

        <h6>Clicked Pixel</h6>
        @if (ClickedPixel.HasValue)
        {
            <p>X: @ClickedPixel.Value.X, Y: @ClickedPixel.Value.Y</p>
        }
        else
        {
            <p class="text-muted">No pixel selected</p>
        }
    </div>
</div>
